# `add`コマンド概要

ファイルの修正をステージングするコマンド。  

# よく使うオプション

## -- <file/directory>

`add`するファイルを指定するオプション。`--`は省略可能なので省略されることが多い。  
オプションといっていいのかわからないが、意識できるとよいと思うので一応記載。

## -p, --patch

すでにgit管理されているファイルの差分単位でステージングするかどうかをインタラクティブに選択できるオプション。

例えば以下のような修正があったとする。

```diff
 # addコマンド概要

+ファイルの修正をステージングするコマンド。  

 # よく使うオプション

+特になし
```

この時に`git add -p -- 02.md`を実行すると、上記差分とともに`(1/1) Stage this hunk [y,n,q,a,d,e,?]? `と聞かれ入力待ち状態になる。

それぞれの入力値の意味は以下の通り。
|値| 処理内容 |
|-|---|
|y|この差分をステージングする|
|n|この差分をステージング**しない** |
|q|以降全ての差分をステージング**しない**|
|a|以降全ての差分をステージングする|
|d|(使ったことない)|
|e|差分をエディタを開いて自由に変更する|
|?|(使ったことない)|
|s|diffを分割する|

※`s`はメッセージに記載されていないが結構便利で、上記の例のようにdiffのブロックが分かれている場合に、それぞれのブロックで追加するかどうかの判断をすることができるようになる。修正が大きくて一つのdiffにまとまってしまってる場合は利用できないが、それでも要所要所で活躍してくれる。

これによって検証用のコードをステージング対象から除外したり、余計な差分が含まれていないか確認しながらステージングをすることができる。  
特に`e`が便利でdiffの構造が理解できていれば、diffのブロックの中に入ってしまっているデバッグコードを削除したり、開発中のコードを対象から外したりが自由にできる。

このオプションによって想定しない差分をコミットしないようにチェックできるため、
誤って開発中のコードやデバッグコードが混入したコミットを作成するミスが減らせる。(なくなるとは言っていない)

なお、新規作成したファイルについてはこのオプションだと無視するので別途addしてあげる必要がある点については一応注意が必要になる。

# その他オプション

## -A, --all

罠。個人的に全く利用しないオプション。  
git管理対象のすべてのステージングしていない変更をステージングする。

意図しない修正やファイルをコミット対象にする事象の原因になるので、  
初回コミット等の明らかにすべてのファイルを追加するケースでもなければ使いたくない。  
何ならそれでも`git add [--] .`で十分なのでわざわざオプションを利用する意味もないかなぁ。

# コメント

正直`-p`オプションの説明をしたいがためにだけある項目。
