# 注意

このコマンドは結構簡単にブランチが壊れるので使う場合はしっかり理解した上でするか、
壊れてもいいように`rebase`用のブランチを切ってから作業をすることをお勧めします。
※というか`rebase`に限らずコンフリクトが発生する可能性のある作業はぶっ壊れてもいいように一時ブランチで作業してから本ブランチにマージするようにした方がいいです。

# `rebase`コマンド(コミット付け替え)概要

`git rebase <base_branch> [<branch>]`を実行すると、`base_branch`の最後のコミットに`branch`側にのみあるコミットを順番につけていくコマンド。  

例えば以下のように分かれたブランチがあるときに、

```
      d3--d4--d5 develop
     /
c1--c2--c3--c4   master
```

一般的な作業としてdevelopブランチをmasterへマージすると以下のようになる。  
※c5はマージコミット

```
      d3--d4--d5
     /          \
c1--c2--c3--c4--c5 master/develop
```

これはよくある流れではあるが、コンフリクトの解消などマージに関わる問題が発生する。  
※マージコミットの差分が分かりづらい等  
developブランチでmasterブランチを指定して`rebase`すると

```
              d3--d4--d5 develop
             /
c1--c2--c3--c4 master
```

というように指定したmasterブランチが示すコミットからmasterブランチに不足しているコミットを順番に追加していく。  
これによってマージコミットが不要になり、マージリクエストでレビューするときもc3,c4が入った状態のコードの差分を確認できるのでコードの差分の考慮を減らせる。
※上記では同じコミットのように記載していますが、実際にはコミット番号が新たに発行されているため、`rebase`前の状態のブランチが別途あるときに、そのブランチからdevelopブランチへのマージリクエストはコンフリクトが確定で発生する。(完全に同じ差分が異なるコミットとして存在するため)

なお、注意として、作業中の差分がある場合は`rebase`を実行できないので`stash`や`commit`などで綺麗にする必要があるのと、コミットを追加するごとにコンフリクトの解消が必要になるので(上記の例で)c4とd3でコンフリクトが発生しているとd4, d5でも同様のコンフリクト解消の手間がかかることが多い。

# よく使うオプション

## コンフリクト解消中に利用するオプション

`rebase`中にコンフリクトが発生すると、コミットごとにコンフリクトを解決して次のコミットに移動する、などの作業が必要になる。
その際に、`rebase`作業の継続や中断などの命令をオプションをつけて実行することで行う。

### --continue

コンフリクトを解消して最終的な修正差分をコミットとして採用する際に使用する。  
誤って`commit`を利用してコンフリクトの解消を行ってしまうとコミットが追加され、現在作業中のコミットの差分がなくなってしまうなどの問題があるので注意すること。

### --abort

`rebase`作業を全て取りやめて、`rebase`する前の状態に戻すオプション。  
作業中にミスをしたときに落ち着いて`--abort`するとよい。

## -i, --interactive

次の解説参照

# その他オプション

# コメント

正直こっちはおまけ。本編は次の解説。  
とはいえチーム開発してるときに、ブランチを切ってから他の人がマージしてたりすると、
マージコミットよりも`rebase`してあげたほうがコミットログが奇麗になるから、
こっちはこっちで結構便利で好き。  
※マージコミットの読みづらさが苦手なのもあるかも。
